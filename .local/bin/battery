#!/bin/sh

for battery in /sys/class/power_supply/BAT?
do
	capacity=$(cat "$battery"/capacity) || exit
	status=$(cat "$battery"/status)

	[ "$status" = 'Discharging' ] && [ "$capacity" -le 20 ] && warn='!'

	printf '%s%s%s\n' "$(echo "$status" | sed 's/,//;s/Discharging/ğŸ®¦/;s/Not charging/ğŸ®®/;s/Charging/ğŸ®§/;s/Unknown/ğŸ­¸/;s/Full/ğŸ®®/;s/ 0*/ /g;s/ :/ /g')" "$warn" "$capacity%"
	unset warn
done
